version: "3.9"

services:
  backend:  # ‚Üê Cambiar de "api" a "backend"
    image: ghcr.io/belutreachi/tiktask-api:qa-1
    container_name: tiktask-backend
    ports:
      - "3000:3000"
    environment:
      DATABASE_PATH: /app/data/database.sqlite
      JWT_SECRET: test-secret-key
    volumes:
      - tiktask_data:/app/data
      - tiktask_uploads:/app/uploads
    networks:
      - tiktask-network

  frontend:  # Opcional: renombrar para consistencia
    image: ghcr.io/belutreachi/tiktask-web:qa-1
    container_name: tiktask-frontend
    ports:
      - "8080:80"
    depends_on:
      - backend
    networks:
      - tiktask-network

networks:
  tiktask-network:
    driver: bridge

volumes:
  tiktask_data:
  tiktask_uploads: