<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TikTask - Gesti칩n de Tareas</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Login Page -->
    <div id="loginPage" class="page">
        <div class="container">
            <div class="auth-card">
                <h1>游꿢 TikTask</h1>
                <h2>Iniciar Sesi칩n</h2>
                <form id="loginForm">
                    <div class="form-group">
                        <label for="loginUsername">Usuario</label>
                        <input type="text" id="loginUsername" required>
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Contrase침a</label>
                        <input type="password" id="loginPassword" required>
                    </div>
                    <div id="loginError" class="error hidden" role="alert"></div>
                    <button type="submit" class="btn btn-primary">Iniciar Sesi칩n</button>
                </form>
                <p class="text-center">
                    쯅o tienes cuenta? <a href="#" id="showRegister">Reg칤strate aqu칤</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Register Page -->
    <div id="registerPage" class="page hidden">
        <div class="container">
            <div class="auth-card">
                <h1>游꿢 TikTask</h1>
                <h2>Registro</h2>
                <form id="registerForm">
                    <div class="form-group">
                        <label for="registerUsername">Usuario</label>
                        <input type="text" id="registerUsername" required>
                    </div>
                    <div class="form-group">
                        <label for="registerEmail">Email</label>
                        <input type="email" id="registerEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="registerPassword">Contrase침a</label>
                        <input type="password" id="registerPassword" required minlength="6">
                    </div>
                    <div id="registerError" class="error"></div>
                    <button type="submit" class="btn btn-primary">Registrarse</button>
                </form>
                <p class="text-center">
                    쯏a tienes cuenta? <a href="#" id="showLogin">Inicia sesi칩n aqu칤</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Tasks Page -->
    <div id="tasksPage" class="page hidden">
        <nav class="navbar">
            <div class="container">
                <h1>游꿢 TikTask</h1>
                <div class="nav-right">
                    <span id="userInfo"></span>
                    <button id="manageUsersBtn" class="btn btn-secondary hidden" type="button">Gesti칩n de usuarios</button>
                    <button id="logoutBtn" class="btn btn-secondary">Cerrar Sesi칩n</button>
                </div>
            </div>
        </nav>

        <div class="container">
            <div class="tasks-header">
                <h2 id="tasksTitle">Mis Tareas</h2>
                <div>
                    <button id="toggleViewBtn" class="btn btn-secondary hidden">Ver Todas las Tareas</button>
                    <button id="addTaskBtn" class="btn btn-primary">+ Nueva Tarea</button>
                </div>
            </div>

            <section id="statsSection" class="stats-panel">
                <div class="stats-header">
                    <h3>Estad칤sticas</h3>
                    <p id="statsSubtitle" class="stats-subtitle">Resumen de tus tareas</p>
                </div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <span class="stat-label">Completadas</span>
                        <span id="statsCompleted" class="stat-value">0</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-label">Pendientes</span>
                        <span id="statsPending" class="stat-value">0</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-label">Total</span>
                        <span id="statsTotal" class="stat-value">0</span>
                    </div>
                </div>
                <div class="progress-wrapper">
                    <div class="progress-header">
                        <span>Progreso</span>
                        <span id="statsProgressText">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div id="statsProgressBar" class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>
            </section>

            <h3 class="filters-title">B칰squeda por filtros</h3>
            <form id="filtersForm" class="filters">
                <div class="form-group">
                    <label for="filterStatus">Estado</label>
                    <select id="filterStatus">
                        <option value="all">Todas</option>
                        <option value="no_hecha">Pendientes</option>
                        <option value="hecha">Completadas</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="filterStartDate">Desde</label>
                    <input type="date" id="filterStartDate">
                </div>
                <div class="form-group">
                    <label for="filterEndDate">Hasta</label>
                    <input type="date" id="filterEndDate">
                </div>
                <div class="form-group">
                    <label for="filterSearch">Buscar</label>
                    <input type="text" id="filterSearch" placeholder="T칤tulo o descripci칩n">
                </div>
                <div class="filter-actions">
                    <button type="submit" class="btn btn-secondary">Aplicar</button>
                    <button type="button" id="clearFiltersBtn" class="btn btn-light">Limpiar</button>
                </div>
            </form>

            <div id="tasksError" class="error hidden" role="alert"></div>
            <div id="tasksEmpty" class="empty hidden">No hay tareas para mostrar</div>

            <div id="tasksList" class="tasks-list">
                <p class="text-center">Cargando tareas...</p>
            </div>
        </div>
    </div>

    <!-- Add/Edit Task Modal -->
    <div id="taskModal" class="modal hidden">
        <div class="modal-content">
            <h3 id="modalTitle">Nueva Tarea</h3>
            <form id="taskForm">
                <div class="form-group">
                    <label for="taskTitle">T칤tulo</label>
                    <input type="text" id="taskTitle" name="title" required>
                </div>
                <div class="form-group">
                    <label for="taskDescription">Descripci칩n</label>
                    <textarea id="taskDescription" name="description" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="taskDueDate">Fecha de Vencimiento</label>
                    <input type="date" id="taskDueDate" name="due_date">
                </div>
                <div class="form-group">
                    <label for="taskAttachments">Archivos adjuntos</label>
                    <input type="file" id="taskAttachments" name="attachments" multiple>
                    <p class="form-helper">Puedes seleccionar varios archivos (m치x. 10 MB por archivo)</p>
                </div>
                <div id="taskError" class="error"></div>
                <div class="modal-actions">
                    <button type="button" id="cancelTaskBtn" class="btn btn-secondary">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Guardar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Admin User Management Modal -->
    <div id="adminUsersModal" class="modal hidden">
        <div class="modal-content admin-users-modal">
            <div class="modal-header">
                <h3>Gesti칩n de usuarios</h3>
                <button id="closeUsersModal" class="modal-close" type="button" aria-label="Cerrar">&times;</button>
            </div>
            <p class="admin-panel-subtitle">Administra las cuentas registradas en la plataforma</p>
            <div class="admin-users-toolbar">
                <button id="refreshUsersBtn" class="btn btn-light" type="button">Actualizar</button>
            </div>
            <div id="adminUsersList" class="admin-users-list">
                <p class="text-center">Cargando usuarios...</p>
            </div>
        </div>
    </div>

    <!-- Edit User Modal -->
    <div id="userModal" class="modal hidden">
        <div class="modal-content">
            <h3 id="userModalTitle">Editar usuario</h3>
            <form id="userForm">
                <div class="form-group">
                    <label for="userUsername">Usuario</label>
                    <input type="text" id="userUsername" name="username" required>
                </div>
                <div class="form-group">
                    <label for="userEmail">Email</label>
                    <input type="email" id="userEmail" name="email" required>
                </div>
                <div class="form-group">
                    <label for="userRole">Rol</label>
                    <select id="userRole" name="role">
                        <option value="user">Usuario</option>
                        <option value="admin">Administrador</option>
                    </select>
                </div>
                <div id="userError" class="error"></div>
                <div class="modal-actions">
                    <button type="button" id="cancelUserBtn" class="btn btn-secondary">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Guardar Cambios</button>
                </div>
            </form>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
